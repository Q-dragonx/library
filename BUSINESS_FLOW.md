# 图书管理系统关键业务逻辑流程图

以下使用Mermaid语法展示图书管理系统的核心业务流程：

## 1. 用户注册/登录流程

```mermaid
flowchart TD
    A[用户访问系统] --> B{是否已登录?}
    B -->|是| C[进入首页]
    B -->|否| D{选择操作?}
    D -->|注册| E[填写注册信息]
    E --> F{信息验证通过?}
    F -->|否| G[显示错误信息]
    F -->|是| H[密码加密存储]
    H --> I[创建用户记录]
    I --> J[注册成功，跳转登录]
    D -->|登录| K[输入用户名密码]
    K --> L{验证通过?}
    L -->|否| M[显示错误信息]
    L -->|是| N[创建用户会话]
    N --> C
```

## 2. 图书入库流程（管理员）

```mermaid
flowchart TD
    A[管理员登录] --> B[进入图书管理页面]
    B --> C[点击"添加图书"]
    C --> D[填写图书信息]
    D --> E{验证ISBN唯一?}
    E -->|否| F[显示错误信息]
    E -->|是| G[创建图书记录]
    G --> H[库存初始化]
    H --> I[入库成功，显示图书列表]
```

## 3. 图书查询流程

```mermaid
flowchart TD
    A[用户访问系统] --> B[进入图书查询页面]
    B --> C{选择查询方式?}
    C -->|关键词搜索| D[输入搜索条件]
    C -->|高级搜索| E[填写多字段条件]
    D --> F[执行查询]
    E --> F
    F --> G{查询结果?}
    G -->|无结果| H[显示"无匹配图书"]
    G -->|有结果| I[分页展示图书列表]
    I --> J{选择操作?}
    J -->|查看详情| K[显示图书详细信息]
    J -->|借书| L[执行借书流程]
```

## 4. 借书流程

```mermaid
flowchart TD
    A[用户登录] --> B[进入图书查询页面]
    B --> C[选择目标图书]
    C --> D{图书库存充足?}
    D -->|否| E[显示"库存不足"]
    D -->|是| F[创建借阅记录]
    F --> G[更新图书库存减1]
    G --> H[计算应还日期]
    H --> I[借书成功，显示借阅信息]
```

## 5. 还书流程

```mermaid
flowchart TD
    A[用户登录] --> B[进入我的借阅页面]
    B --> C[选择要归还的图书]
    C --> D[点击"归还图书"]
    D --> E[记录实际还书日期]
    E --> F{是否逾期?}
    F -->|是| G[标记为逾期]
    F -->|否| H[标记为正常归还]
    G --> I[更新图书库存加1]
    H --> I
    I --> J[还书成功，显示结果]
```

## 6. 借阅排行榜生成流程

```mermaid
flowchart TD
    A[管理员登录] --> B[进入统计报表页面]
    B --> C[选择统计周期]
    C --> D{周期类型?}
    D -->|月度| E[筛选当月借阅记录]
    D -->|季度| F[筛选当季借阅记录]
    E --> G[统计图书借阅次数]
    F --> G
    G --> H[统计用户借阅次数]
    H --> I[生成图书借阅排行榜]
    I --> J[生成用户借阅排行榜]
    J --> K[展示排行榜数据]
```

## 7. 系统架构流程

```mermaid
flowchart TD
    A[用户界面] --> B[Flask应用层]
    B --> C[路由层]
    C --> D1[用户认证模块]
    C --> D2[图书管理模块]
    C --> D3[借阅管理模块]
    C --> D4[统计报表模块]
    D1 --> E[数据访问层]
    D2 --> E
    D3 --> E
    D4 --> E
    E --> F[数据库层]
    F --> G[用户表]
    F --> H[图书表]
    F --> I[借阅记录表]
```